<p-menubar>
  <ng-template #start>
    <div class="flex items-center gap-3">
      <!-- Logo SVG -->
      <svg width="36" height="36" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="45" fill="#0f172a"/>
        <!-- Elasticsearch-style bars -->
        <rect x="20" y="25" width="60" height="12" rx="3" fill="#065f46"/>
        <rect x="25" y="44" width="50" height="12" rx="3" fill="#78350f"/>
        <rect x="30" y="63" width="40" height="12" rx="3" fill="#1e3a5f"/>
        <!-- Monitor pulse line -->
        <path d="M15 85 L35 85 L42 70 L50 90 L58 75 L65 85 L85 85" stroke="#047857" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <!-- App name -->
      <span class="text-2xl font-bold text-slate-700">
        ElasMon
      </span>
    </div>
  </ng-template>
  <ng-template #end>
    <div class="flex items-center gap-3">
      <!-- Hamburger menu button - always visible -->
      <p-button 
        [icon]="'pi pi-bars'" 
        [rounded]="true" 
        [text]="true" 
        (onClick)="toggleSidebar()">
      </p-button>
    </div>
  </ng-template>
</p-menubar>

<div class="flex">
  <!-- Sidebar: Toggle visibility with hamburger button
       - Desktop: default visible
       - Mobile/Tablet: default hidden
  -->
  @if (sidebarVisible()) {
    <div class="w-[20%] min-w-[200px] p-4 max-lg:fixed max-lg:top-[60px] max-lg:left-0 max-lg:h-[calc(100vh-60px)] max-lg:w-[280px] max-lg:min-w-[280px] max-lg:bg-white max-lg:z-[1000] max-lg:overflow-y-auto max-lg:shadow-[2px_0_8px_rgba(0,0,0,0.15)] max-sm:w-full max-sm:min-w-full transition-all duration-300">
      <p-panelMenu class="mb-4" [model]="connectionNodes()"></p-panelMenu>
      <span class="text-sm text-gray-400 text-center block">Version {{ version }}</span>
    </div>
  }

  <div class="flex-1">
    @if (selectedConnectionNode()?.Type == 'Connections') {
      <connections></connections>
    }

    @if (selectedConnectionNode()?.Type == 'Connection') {
      <connection [connection]="selectedConnectionNode()"></connection>
    }

    @if (selectedConnectionNode()?.Type == 'Node') {
      <node [connection]="selectedConnectionNode()"></node>
    }

    @if (selectedConnectionNode()?.Type == 'Index') {
      <index [connection]="selectedConnectionNode()"></index>
    }

    @if (selectedConnectionNode()?.Type == 'Shard') {
      <shard [connection]="selectedConnectionNode()"></shard>
    }
  </div>
</div>

  <!-- <router-outlet></router-outlet> -->
